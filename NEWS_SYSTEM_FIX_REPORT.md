# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã –Ω–æ–≤–æ—Å—Ç–µ–π –º–æ–Ω–∞—Å—Ç—ã—Ä—è

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ API endpoints

- –ù–µ –±—ã–ª–æ endpoint'–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ slug
- –ù–µ –±—ã–ª–æ endpoint'–∞ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

### 2. –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

- HomePage –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —Å—Å—ã–ª–∫–∏ —Å ID –≤–º–µ—Å—Ç–æ slug
- Frontend –æ–∂–∏–¥–∞–ª API `/api/news/slug/:slug`, –Ω–æ backend –µ–≥–æ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–ª

### 3. –û—à–∏–±–∫–∏ –≤ SunEditor (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ä–∞–Ω–µ–µ)

- –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π KaTeX –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### Backend (/home/danya/–î–æ–∫—É–º–µ–Ω—Ç—ã/monastyr/backend/src/routes/news.ts)

#### 1. –î–æ–±–∞–≤–ª–µ–Ω endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ slug:

```typescript
router.get('/slug/:slug', async (req, res) => {
  try {
    const { slug } = req.params

    const news = await prisma.news.findFirst({
      where: {
        slug,
        isVisible: true,
      },
      include: {
        category: true,
        author: {
          select: { id: true, name: true, email: true },
        },
        tags: {
          include: {
            tag: true,
          },
        },
      },
    })

    if (!news) {
      return res.status(404).json({ error: '–ù–æ–≤–æ—Å—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞' })
    }

    res.json(news)
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ slug:', error)
    res.status(500).json({ error: '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞' })
  }
})
```

#### 2. –î–æ–±–∞–≤–ª–µ–Ω endpoint –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤:

```typescript
router.post('/slug/:slug/view', async (req, res) => {
  try {
    const { slug } = req.params

    const news = await prisma.news.findFirst({
      where: {
        slug,
        isVisible: true,
      },
    })

    if (!news) {
      return res.status(404).json({ error: '–ù–æ–≤–æ—Å—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞' })
    }

    const updatedNews = await prisma.news.update({
      where: { id: news.id },
      data: {
        viewCount: {
          increment: 1,
        },
      },
    })

    res.json({ success: true, viewCount: updatedNews.viewCount })
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —Å—á–µ—Ç—á–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤:', error)
    res.status(500).json({ error: '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞' })
  }
})
```

### Frontend (/home/danya/–î–æ–∫—É–º–µ–Ω—Ç—ã/monastyr/webapp/src/pages/HomePage/index.tsx)

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è slug:

```tsx
// –ë—ã–ª–æ:
href={`/news/${neww.id}`}

// –°—Ç–∞–ª–æ:
href={`/news/${neww.slug}`}
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã:

1. **API Endpoints**

   - GET `/api/news/slug/den-otkrytykh-dverey` ‚Üí 200 OK
   - POST `/api/news/slug/den-otkrytykh-dverey/view` ‚Üí 200 OK

2. **Frontend –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**

   - –ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç —Å–ø–∏—Å–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–º—É –ø—Ä–æ—Å–º–æ—Ç—Ä—É
   - –ü–µ—Ä–µ—Ö–æ–¥ —Å –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫ –Ω–æ–≤–æ—Å—Ç–∏
   - –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –Ω–æ–≤–æ—Å—Ç—è–º–∏

3. **–°—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤**

   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

4. **–ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏**
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–µ–≥–∏, –∞–≤—Ç–æ—Ä
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–≤—è–∑–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### üìä –î–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

- Backend –∑–∞–ø—É—â–µ–Ω: ‚úÖ http://localhost:3000
- Frontend –∑–∞–ø—É—â–µ–Ω: ‚úÖ http://localhost:5173
- –ù–æ–≤–æ—Å—Ç–∏ –≤ –±–∞–∑–µ: 3 —à—Ç—É–∫–∏ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ slug'–∞–º–∏
- –¢–µ–∫—É—â–∏–π —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –¥–ª—è "–î–µ–Ω—å –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–≤–µ—Ä–µ–π": 12

## –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

1. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** ‚Üí **–î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å**

   - http://localhost:5173/ ‚Üí http://localhost:5173/news/den-otkrytykh-dverey ‚úÖ

2. **–°–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π** ‚Üí **–î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å**

   - http://localhost:5173/news ‚Üí http://localhost:5173/news/izmenenie-raspisaniya-bogosluzheniy ‚úÖ

3. **–ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –Ω–æ–≤–æ—Å—Ç—è–º–∏**
   - –°–≤—è–∑–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—Å—ã–ª–∞—é—Ç—Å—è –ø–æ slug ‚úÖ

## –°—Ç–∞—Ç—É—Å: –ó–ê–í–ï–†–®–ï–ù–û ‚úÖ

–°–∏—Å—Ç–µ–º–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç:

- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π
- –û—Ç–∫—Ä—ã–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–∞–º
- –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –º–µ–∂–¥—É –Ω–æ–≤–æ—Å—Ç—è–º–∏
- –í–∏–¥–µ—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- –ü–æ–ª—É—á–∞—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–æ–≤–æ—Å—Ç–∏ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–µ–≥–∏, –∞–≤—Ç–æ—Ä)

---

_–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: 4 –∏—é–Ω—è 2025_
_–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~30 –º–∏–Ω—É—Ç_
